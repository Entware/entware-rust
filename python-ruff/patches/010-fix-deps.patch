--- a/Cargo.toml
+++ b/Cargo.toml
@@ -304,3 +304,13 @@ debug = 1
 # The profile that 'cargo dist' will build with.
 [profile.dist]
 inherits = "release"
+
+[patch.crates-io]
+# localtime/zoneinfo
+chrono = { path = "../../chrono-0.4.41" }
+iana-time-zone = { path = "../../iana-time-zone-0.1.63" }
+# all: no SYS_getrandom
+getrandom2 = { path = "../../getrandom-0.2.16", package = "getrandom", version = "0.2.16" }
+getrandom3 = { path = "../../getrandom-0.3.3", package = "getrandom", version = "0.3.3" }
+# mips/mipsel Atomic*64
+get-size2 = { path = "../../get-size2-0.6.2/crates/get-size2" }
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -48,6 +48,7 @@ bindings = "bin"
 manifest-path = "crates/ruff/Cargo.toml"
 module-name = "ruff"
 python-source = "python"
+locked = true
 strip = true
 exclude = [
     "crates/ruff_linter/resources/test/fixtures/**/*",
